!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=React},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Box=void 0;const r=n(0);class o extends r.Component{constructor(e){super(e),this.render=()=>r.createElement("div",{className:"box"},this.props.children)}}t.Box=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.request=void 0,t.request=(e,t,n)=>{const r=new XMLHttpRequest;if(r.open(e,t,!0),!r)throw"xhr creation failed";r.onerror=()=>{throw"xhr call failed"},r.onload=()=>{const e=JSON.parse(r.responseText);n(e)},r.send()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(4),i=n(5);o.render(r.createElement(i.App,null),document.getElementById("container"))},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(0),o=n(6),i=n(7),s=n(2);class l extends r.Component{constructor(e){super(e),this.loadRepo=(e,t)=>{s.request("GET",`/api/${e}/${t}/info`,e=>{if(!e||e.error)throw"request failed";this.setState({repoInfo:e.result,loaded:!0})})},this.render=()=>r.createElement("div",{id:"app"},this.state&&this.state.loaded?r.createElement(i.Repo,{info:this.state.repoInfo}):r.createElement(o.EnterRepo,{loadRepo:this.loadRepo}))}}t.App=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnterRepo=void 0;const r=n(0),o=n(1);class i extends r.Component{constructor(e){super(e),this.setRepo=e=>{this.setState({repo:e.currentTarget.value})},this.loadRepo=e=>{const[t,n]=this.state.repo.split("/");this.props.loadRepo(t,n)},this.checkEnter=e=>{"Enter"==e.key&&this.loadRepo(null)},this.render=()=>r.createElement("div",{id:"enterRepo"},r.createElement(o.Box,null,r.createElement("div",{id:"enterRepoMain"},r.createElement("h3",{id:"enterRepoTitle"},"Enter a Go repo to test:"),r.createElement("div",null,r.createElement("b",null,"github.com/ "),r.createElement("input",{id:"enterRepoInput",onChange:this.setRepo,onKeyDown:this.checkEnter,type:"text"}))),r.createElement("button",{id:"load",onClick:this.loadRepo},"LOAD"))),this.state={repo:""}}}t.EnterRepo=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Repo=void 0;const r=n(0),o=n(1),i=n(8),s=n(9),l=n(2);class a extends r.Component{constructor(e){super(e),this.coverageMap=new Map,this.selectFile=e=>{this.setState({file:e})},this.loadCoverage=e=>{l.request("POST",`/api/${this.props.info.org}/${this.props.info.name}/test`,e=>{if(!e||e.error)throw"request failed";for(const t of e.result.files)t.file_name.startsWith("github.com/")&&(t.file_name=t.file_name.split("/").slice(3).join("/")),this.coverageMap.set(t.file_name,t);this.setState({coverage:e.result})})},this.render=()=>{const e=this.coverageMap.get(this.props.info.files[this.state.file].path);return r.createElement("div",null,r.createElement("div",{id:"repoHeader"},r.createElement("div",{id:"repoTitle"},r.createElement("span",{id:"repoName"},this.props.info.org,"/",this.props.info.name),r.createElement("span",{id:"star"},"â˜…"),r.createElement("b",null,this.props.info.meta.watchers>=1e3?Math.round(this.props.info.meta.watchers/100)/10+"k":""+this.props.info.meta.watchers)),this.state.coverage?r.createElement("div",{id:"runTestsClicked"},"TESTS RAN SUCCESSFULLY!"):r.createElement("button",{id:"runTests",onClick:this.loadCoverage},"RUN TESTS")),r.createElement(o.Box,null,r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("th",{id:"fileSelectorHeader"},r.createElement("span",null,"Files"),r.createElement("span",{id:"languageTag"},this.props.info.meta.language.toUpperCase())),r.createElement("th",{id:"fileViewHeader"},this.props.info.files[this.state.file].path)),r.createElement("tr",null,r.createElement("td",{id:"fileSelector"},r.createElement(i.FileSelector,{files:this.props.info.files,selectFile:this.selectFile})),r.createElement("td",{id:"fileView"},r.createElement(s.FileView,{info:this.props.info.files[this.state.file],coverage:e})))))))},this.state={file:0,coverage:null}}}t.Repo=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileSelector=void 0;const r=n(0);class o extends r.Component{constructor(e){super(e),this.selectFile=e=>t=>{this.props.selectFile(e)},this.render=()=>r.createElement("div",{id:"fileSelector"},this.props.files.map((e,t)=>r.createElement("button",{className:"passiveButton",key:"file_"+t,onClick:this.selectFile(t)},r.createElement(i,null),e.path))),this.state={file:0}}}t.FileSelector=o;const i=()=>r.createElement("svg",{className:"fileIcon","aria-label":"file",viewBox:"0 0 12 16",version:"1.1",width:"12",height:"16",role:"img"},r.createElement("path",{fillRule:"evenodd",d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileView=void 0;const r=n(0);class o extends r.Component{constructor(e){super(e),this.render=()=>{const e=atob(this.props.info.content).split("\n"),t=new Array(e.length).fill(!1);if(this.props.coverage)for(const e of this.props.coverage.coverage_blocks)for(let n=e.start_line;n<e.end_line;n++)t[n]=!0;const n=e=>this.props.coverage?t[e]?"lineCovered":"lineNotCovered":"";return r.createElement("div",null,r.createElement("table",null,r.createElement("tbody",null,e.map((e,t)=>r.createElement("tr",null,r.createElement("td",{className:"lineIndex"},r.createElement("span",null,t+1)),r.createElement("td",{className:n(t)},r.createElement("span",{className:"line"},e)))))))}}}t.FileView=o}]);
//# sourceMappingURL=main.js.map